(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function l(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=l(e);fetch(e.href,s)}})();const E=[{id:1,name:"rueen",avatar:"https://images.pexels.com/photos/415829/pexels-photo-415829.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:1,relatedIds:[2,3],describe:{title:"宇宙第一大美女",content:"<div>亮躬耕陇亩，好为《梁父吟》。身长八尺，每自比于管仲、乐毅，时人莫之许也。惟博陵崔州平、颍川徐庶元直与亮友善，谓为信然。时先主屯新野。徐庶见先主，先主器之，谓先主曰：“诸葛孔明者，卧龙也，将军岂愿见之乎？”先主曰：“君与俱来。”庶曰：“此人可就见，不可屈致也。将军宜枉驾顾之。由是先主遂诣亮，凡三往，乃见。因屏人曰：“汉室倾颓，奸臣窃命，主上蒙尘。孤不度德量力，欲信大义于天下，而智术浅短，遂用猖蹶，至于今日。然志犹未已，君谓计将安出？亮答曰：“自董卓已来，豪杰并起，跨州连郡者不可胜数。曹操比于袁绍，则名微而众寡，然操遂能克绍，以弱为强者，非惟天时，抑亦人谋也。今操已拥百万之众，挟天子而令诸侯，此诚不可与争锋。孙权据有江东，已历三世，国险而民附，贤能为之用，此可以为援而不可图也。荆州北据汉、沔，利尽南海，东连吴会，西通巴、蜀，此用武之国，而其主不能守，此殆天所以资将军，将军岂有意乎？益州险塞，沃野千里，天府之土，高祖因之以成帝业。刘璋暗弱，张鲁在北，民殷国富而不知存恤，智能之士思得明君。将军既帝室之胄，信义著于四海，总揽英雄，思贤如渴，若跨有荆、益，保其岩阻，西和诸戎，南抚夷越，外结好孙权，内修政理；天下有变，则命一上将将荆州之军以向宛、洛，将军身率益州之众出于秦川，百姓孰敢不箪食壶浆以迎将军者乎？诚如是，则霸业可成，汉室可兴矣。”先主曰：“善！”于是与亮情好日密。关羽、张飞等不悦，先主解之曰：“孤之有孔明，犹鱼之有水也。愿诸君勿复言。”羽、飞乃止。</div>"}},{id:2,name:"2",avatar:"https://images.pexels.com/photos/25252688/pexels-photo-25252688.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:2,relatedIds:[1,3,9],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:3,name:"3",avatar:"https://images.pexels.com/photos/25003298/pexels-photo-25003298.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:3,relatedIds:[1,2],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:4,name:"4",avatar:"https://images.pexels.com/photos/25002962/pexels-photo-25002962.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:1,relatedIds:[2,6],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:5,name:"5",avatar:"https://images.pexels.com/photos/25232982/pexels-photo-25232982.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:2,relatedIds:[8,9],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:6,name:"6",avatar:"https://images.pexels.com/photos/25242264/pexels-photo-25242264.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:3,relatedIds:[2,10],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:7,name:"7",avatar:"https://images.pexels.com/photos/25205085/pexels-photo-25205085.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:1,relatedIds:[3,4],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:8,name:"8",avatar:"https://images.pexels.com/photos/20532356/pexels-photo-20532356.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:2,relatedIds:[2],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:9,name:"9",avatar:"https://images.pexels.com/photos/25232980/pexels-photo-25232980.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:3,relatedIds:[5],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}},{id:10,name:"10",avatar:"https://images.pexels.com/photos/25003282/pexels-photo-25003282.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1",roleType:3,relatedIds:[1,2,3],describe:{title:"宇宙第一大美女",content:"<div>蜀道难 难于上青天</div>"}}],F=(t,n)=>{let l;return function(){const o=this,e=arguments;clearTimeout(l),l=setTimeout(()=>{t.apply(o,e)},n)}},b=[],y=30,x=100,B=2500;let a=[],u=null,p=!1,m=window.innerWidth,f=window.innerHeight,d=parseInt(Math.min(m,f)/8),I=Math.ceil(m/x)*1e3;const w=()=>{m=window.innerWidth,f=window.innerHeight,d=parseInt(Math.min(m,f)/8),I=Math.ceil(m/x)*1e3},C=(t={})=>{let n,l,o=0;const e=()=>{let s=Math.floor(Math.random()*(m-d));t.x!=null&&(s=t.x);let i=Math.floor(Math.random()*(f-d));t.y!=null&&(i=Math.floor(Math.random()*(f-d)));const c=b.filter(r=>Math.abs(r.x-s)<y&&Math.abs(r.y-i)<y);c.length>0&&o<3&&t.x!=null&&t.y!=null?(console.log("坐标重合",c,s,i),o+=1,e()):(t.x!=null?n=t.x:n=s,t.y!=null?l=t.y:l=i)};return e(),{x:n,y:l}},v=t=>{const l=document.getElementById(`item_${t}`).getBoundingClientRect(),o=parseInt(l.left+d/2),e=parseInt(l.top+d/2);return{x:o,y:e}},q=({x1:t,y1:n,x2:l,y2:o,id1:e,id2:s,relatedLine:i})=>{const c=document.getElementById("svg");if(!c.getElementById(`${e}_${s}`)){const r=document.createElementNS("http://www.w3.org/2000/svg","line");r.setAttribute("x1",t),r.setAttribute("y1",n),r.setAttribute("x2",l),r.setAttribute("y2",o),r.setAttribute("id",`${e}_${s}`),c.appendChild(r)}},A=t=>{const n=v(t.id),l=[];t.relatedIds.forEach(e=>{if(document.getElementById(`item_${e}`)){const i=v(e);l.push(`${t.id}_${e}`),q({x1:n.x,y1:n.y,x2:i.x,y2:i.y,id1:t.id,id2:e,relatedLine:l})}}),document.querySelectorAll(".item").forEach(function(e){[...t.relatedIds,t.id].indexOf(e.idKey)<0&&e.classList.add("blur")})},L=()=>{document.getElementById("svg").querySelectorAll("line").forEach(function(o){o.remove()});var l=document.querySelectorAll(".blur");l.forEach(function(o){o.classList.remove("blur")})},R=t=>{const n=t.describe;if(!n||p)return;T(t),p=!0;const l=`
    <div class="popup">
      <div class="close" id="modalClose">
        <img src="./images/close.png" alt="">
      </div>
      <div class="title" id="modalTitle">${n.title}</div>
      <div class="description" id="modalDes">${n.content}</div>
    </div>`,o=document.getElementById("modal");if(o){o.classList.add("visible");const e=document.getElementById("modalTitle"),s=document.getElementById("modalDes");e.innerHTML=`${n.title}`,s.innerHTML=`${n.content}`}else{let e=document.createElement("div");e.id="modal",e.classList.add("about"),e.classList.add("visible"),e.innerHTML=l,document.body.appendChild(e),e.addEventListener("click",function(s){(s.target.id==="modalClose"||s.target.parentNode.id==="modalClose")&&(p=!1,e.classList.remove("visible"),g(),L())})}},T=t=>{let n=0;t.relatedIds.forEach(o=>{const e=document.getElementById(`item_${o}`);if(!e)h(o),n+=350;else{const s=e.getBoundingClientRect();if(m-s.right<d/4){const i=E.find(c=>c.id===o);M(i),h(o),n+=350}}}),setTimeout(()=>{S(),A(t)},n)},$=()=>{u&&clearInterval(u),u=setInterval(()=>{a.length&&h()},B)},S=()=>{document.querySelectorAll(".item").forEach(function(n){getComputedStyle(n).animationName!=="none"&&(n.style.animationPlayState="paused")}),u&&clearInterval(u)},g=()=>{document.querySelectorAll(".item").forEach(function(n){n.style.animationPlayState="running"}),$()},M=t=>{const n=document.getElementById(`item_${t.id}`);n.parentNode.removeChild(n),a.push(t)},h=(t=null)=>{let n;if(document.getElementById(t))return;t!=null&&a.find(i=>i.id===t)?(n=a.find(i=>i.id===t),a=a.filter(i=>i.id!=t)):n=a.shift();const o=C();b.push({id:n.id,...o});const e=document.getElementById("list"),s=document.createElement("div");s.id=`item_${n.id}`,s.idKey=n.id,s.style.width=`${d}px`,s.style.height=`${d}px`,s.style.top=`${o.y}px`,s.classList.add("item"),s.style.animation=`scaleUp .3s linear forwards, scrollRight ${I/1e3}s linear .3s forwards`,s.innerHTML=`
    <div class="avatar" style="background-image: url(${n.avatar})"></div>
      <div class="mask mask_${n.roleType}"></div>
    <div class="name">${n.name}</div>`,s.addEventListener("animationend",function(i){const{animationName:c}=i;c==="scrollRight"&&M(n)}),s.addEventListener("mouseenter",function(){p||T(n)}),s.addEventListener("mouseleave",function(){p||(g(),L())}),s.addEventListener("click",function(){R(n)}),e.appendChild(s),$()},_=async()=>{a=[...E],h()},j=()=>{const t=document.createElement("style");t.textContent=`
    :root {
      --blur: ${d/10}px; /* 这里定义了模糊效果的强度 */
    }
  `,document.head.appendChild(t)};function N(){document.fullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen?document.documentElement.webkitRequestFullscreen():document.documentElement.msRequestFullscreen&&document.documentElement.msRequestFullscreen()}document.addEventListener("DOMContentLoaded",()=>{j(),_()});document.addEventListener("visibilitychange",function(){document.hidden?S():g()});const P=document.getElementById("fullscreen");P.addEventListener("click",N);document.addEventListener("fullscreenchange",function(t){w()});window.addEventListener("resize",F(function(t){w()},1e3));
